# 咖啡因追踪器 (Caffeine Tracker)

[![MIT License](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![GitHub issues](https://img.shields.io/github/issues/YangguangZhou/Caffeine-Tracker)](https://github.com/YangguangZhou/Caffeine-Tracker/issues)
[![GitHub forks](https://img.shields.io/github/forks/YangguangZhou/Caffeine-Tracker)](https://github.com/YangguangZhou/Caffeine-Tracker/network)
[![GitHub stars](https://img.shields.io/github/stars/YangguangZhou/Caffeine-Tracker)](https://github.com/YangguangZhou/Caffeine-Tracker/stargazers)

一个使用 React 构建的 Web 应用，旨在帮助用户科学地追踪、管理和分析他们的咖啡因摄入量，并提供基于科学模型的代谢估算和健康建议。

[请在此处插入应用截图或 GIF 演示]

## ✨ 功能特性

* **咖啡因摄入记录:**
    * 快速添加摄入记录，支持从预设饮品列表选择或手动输入。
    * 支持选择饮品、输入容量自动计算咖啡因含量。
    * 支持直接输入咖啡因含量。
    * 可自定义记录名称和摄入时间。
    * 编辑和删除历史摄入记录。
* **饮品管理:**
    * 包含多种常见饮品（通用咖啡、连锁品牌、茶饮、速溶、其他）的预设数据。
    * 允许用户添加、编辑和删除自定义饮品（名称、咖啡因含量、默认容量、分类）。
    * 按分类和关键词搜索/筛选饮品。
* **当前状态仪表盘:**
    * 实时显示当前估算的体内咖啡因含量和浓度。
    * 半圆形进度条可视化当前含量相对于每日推荐上限的比例。
    * 根据当前含量提供状态评估和建议。
    * 显示今日总摄入量和每日推荐上限（结合通用指南和个性化设置）。
    * 估算达到“睡眠安全阈值”浓度所需的时间，并显示建议的最早睡眠时间。
    * 提供基于今日摄入量、近期平均摄入量和当前时间的健康建议。
* **咖啡因代谢曲线:**
    * 显示过去几小时和未来十几小时的代谢趋势。
    * 标记“现在”时间点和“睡眠安全阈值”参考线。
* **数据统计与分析:**
    * 按周、月、年视图查看历史摄入数据。
    * 柱状图展示所选时间范围内的每日/每月总摄入量。
    * 显示所选时间范围的总摄入量和日均摄入量。
    * 提供摄入来源分析，展示不同饮品贡献的咖啡因比例。
    * 包含健康分析与洞察报告，评估摄入模式和睡眠影响。
* **个性化设置:**
    * 设置体重，用于个性化推荐和浓度估算。
    * 设置通用每日最大摄入量。
    * 设置个性化推荐剂量，应用将取计算值与通用上限的较低者作为有效上限。
    * 调整咖啡因半衰期，以匹配个人代谢情况。
    * 调整分布容积 (L/kg)，用于浓度估算。
    * 设置睡前安全浓度阈值，用于睡眠时间建议。
    * 设置计划睡眠时间。
* **数据管理:**
    * 支持将所有数据导出为 JSON 文件进行备份。
    * 支持从 JSON 文件导入数据，覆盖现有数据。
    * 提供清除所有本地数据的选项。

## 🛠️ 安装与运行

1.  **克隆仓库:**
    ```bash
    git clone [https://github.com/YangguangZhou/Caffeine-Tracker.git](https://github.com/YangguangZhou/Caffeine-Tracker.git)
    cd Caffeine-Tracker
    ```
2.  **安装依赖:**
    ```bash
    npm install
    # 或者
    yarn install
    ```
3.  **启动开发服务器:**
    ```bash
    npm start
    # 或者
    yarn start
    ```
    应用将在 `http://localhost:3000` (或指定的端口) 上运行。

## 📖 使用说明

1.  **首次使用:** 应用会加载默认设置和预设饮品。**强烈建议**先前往“设置”页面，根据个人情况（体重、对咖啡因的敏感度等）调整体重、**咖啡因半衰期**和**睡前安全浓度阈值**等参数。
2.  **添加记录:**
    * 点击“添加咖啡因摄入记录”按钮。
    * 从列表中选择饮品，或清除选择以手动输入。
    * 如果选择了饮品，**核对并输入实际饮用容量 (ml)**，咖啡因含量将自动计算显示。
    * 如果未选择饮品，或想直接指定含量，在“摄入量 (mg)”字段输入。
    * 修改记录名称和摄入时间。
    * 点击“添加记录”。
3.  **查看状态:** “当前状态”页面显示实时咖啡因估算、代谢曲线和健康建议。**请记住这些都是基于模型的估算值。**
4.  **查看统计:** “数据统计”页面提供历史数据回顾和分析。可切换周/月/年视图。
5.  **管理饮品:** 在“设置”页面的“饮品管理”部分，可以添加、编辑或删除自定义饮品，也可以编辑预设饮品的值。**建议根据您常喝饮品的实际情况编辑预设值。**
6.  **数据备份/恢复:** 在“设置”页面的“数据管理”部分，可以导出当前所有数据为 JSON 文件，或从之前导出的文件导入数据。

## 🔬 计算与科学依据

* **⚠️ 预设数据提醒:** 应用内预设饮品的咖啡因含量是基于公开数据整理或估算得出，**可能与实际含量存在差异**。不同品牌、不同杯型、不同制作方式甚至不同批次都可能影响实际含量。例如，一杯手冲咖啡的咖啡因含量可能远高于一杯速溶咖啡。**强烈建议您根据实际情况、产品标签或官方数据，在“设置”中编辑预设值或添加自定义饮品，以获得更准确的追踪结果。**
* **⚠️ 计算模型局限性:**
    * **咖啡因代谢:** 本应用使用基于半衰期的一级消除动力学模型 (`M(t) = M0 * (0.5)^(t / t_half)`) 来估算剩余咖啡因量。这是一个**简化的通用模型**，假设代谢速率恒定。
    * **个体差异巨大:** 实际的咖啡因代谢速率受多种复杂因素影响，包括但不限于：
        * **遗传基因:** `CYP1A2` 酶的活性对咖啡因代谢速率有显著的影响。
        * **肝脏健康状况:** 肝功能会直接影响代谢能力。
        * **吸烟:** 吸烟者通常会加速咖啡因的代谢。
        * **怀孕与激素水平:** 怀孕期间咖啡因代谢会显著减慢。
        * **药物相互作用:** 某些药物（如口服避孕药、某些抗生素、抗抑郁药等）会减慢咖啡因代谢；另一些则可能加速。
        * **年龄和健康状况:** 年龄和整体健康状况也可能产生影响。
    因此，默认的数据都只是**估算**，无法完全反映复杂的生理过程。
    * **睡眠建议:** 基于估算的浓度和设定的阈值计算得出，仅作为**参考**。个体对咖啡因导致睡眠障碍的敏感度差异很大，有些人即使在较低浓度下也会受到影响。
* **💡 个性化调整建议:** **我们强烈建议结合自身的实际感受和经验，在“设置”页面仔细调整关键参数：**
    * **咖啡因半衰期 (小时):** 如果您感觉咖啡因的效果持续时间比一般人长（例如，下午喝咖啡晚上就睡不着），尝试**增加**半衰期；如果您感觉效果消失得很快，可以尝试**减少**半衰期。
    * **睡前安全浓度阈值 (mg/L):** 如果您对咖啡因非常敏感，即使在推荐阈值下仍感觉影响睡眠，请**降低**此阈值；如果您相对不敏感，可以适当**提高**。
    **通过个性化调整，您可以让应用的估算结果更贴合您的个人情况，但请始终记住这仍然是估算。**
* **数据来源:** 预设饮品的咖啡因含量基于公开数据整理或估算，可能存在误差，用户可以自行编辑。

## 💾 数据持久化

所有用户数据，包括摄入记录、用户设置和饮品列表，都存储在用户浏览器的 `localStorage` 中。这意味着数据仅保存在本地设备上，清除浏览器缓存、使用隐私模式或在不同浏览器/设备上访问将无法获取数据，除非使用导出/导入功能。**请注意定期使用导出功能备份您的数据。**

## 📄 许可证

本项目采用 [MIT](LICENSE) 许可证。